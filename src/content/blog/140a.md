---
title: 堵住漏洞 再解Windows默认共享
description: 　　在Windows 2000/XP系统中，隐藏着一种据说是可以“致命”的漏洞，它让很多人一听到就谈“虎”色变。在“我的电脑”上右击“管理”，依次选择“系统工具→共享文件夹→共享”，就会看到右边窗口中的默认共享。这些带有美元“$”标记的符号就是Windows系统默认共享，也就是Windows在安装完毕后自动共享的功能，很多人都听说是个漏洞。　　IPC$、ADMIN$、C$、D$都是什么?...........
date: 2007-08-28 14:07:27
category: 技术文章
tags: ['安全', '技术类', 'Windows']
post_id: 140
alias: 140
ViewNums: 4491
---

在Windows  2000/XP系统中，隐藏着一种据说是可以&ldquo;致命&rdquo;的漏洞，它让很多人一听到就谈&ldquo;虎&rdquo;色变。在&ldquo;我的电脑&rdquo;上右击&ldquo;管理&rdquo;，依次选择&ldquo;系统工具&rarr;共享文件夹&rarr;共享&rdquo;，就会看到右边窗口中的默认共享。这些带有美元&ldquo;$&rdquo;标记的符号就是Windows系统默认共享，也就是Windows在安装完毕后自动共享的功能，很多人都听说是个漏洞。

**IPC$、ADMIN$、C$、D$都是什么?**

IPC$(Internet Process Connection)可以被理解为一种&ldquo;专用管道&rdquo;，可以在连接双方建立一条安全的通道，实现对远程计算机的访问。Windows NT/2000/XP提供了IPC$功能的同时，在初次安装系统时还打开了默认共享，即所有的逻辑共享(C$,D$,E$&hellip;&hellip;)和系统目录(ADMIN$)共享。所有这些共享的目的，都是为了方便管理员的管理，但在有意无意中，导致了系统安全性的隐患。

微软在不经意间造成的隐患，引起了很多关注，关于他们的种种说法也流传于网络间。看看下面几种流行的理论，你是不是也有同样的看法呢?

**观点一**：默认共享本身就是漏洞，因此要避免安全隐患，必须删除所有的默认共享。

**观点二**：默认共享就好像普通共享一样，任何人都可以随意使用ADMIN$，C$，D$等共享从你电脑里偷东西。

**观点三**：IPC$是可以删除的，而且不会再次出现。

**观点四**：要想删除默认共享，只要在Windows开机脚本中创建一个批处理文件就能实现。

答1:既然默认共享是漏洞，微软干嘛不补上?其实默认共享是一项非常有用的功能，只是我们平时用不到罢了。微软的初衷是便于网管进行远程管理。试想一下。在一个大型网络里。管理员有必要亲自跑到某台机上去看一些东西或是删除一些东西吗?这些管理员坐在主机前通过默认共享可以很轻松地办到。这是微软为了方便管理而提供的功能。不知从什么时候开始，它变成人家口中所说的漏洞了。

答2:如果你开放了所有的默认共享。人家就可以利用默认共享到你电脑里偷东西吗?答案是否定的。除非是你自己想放他进来。默认共享是管理员级别或是有相对应权限的账户的操作。你试试guest级用户能使用默认共享吗?不能!为什么说是你自己想放别人进来呢?你问问自己。你的管理员密码呢?要么直接为空。要么就是些123，1234之类的弱口令。用扫描工具短短时间内就能被猜解的。你已经打开了大门，人家有什么理由不进来呢?

就算是你密码为空或是弱口令，对方也不一定能用默认共享进入你的电脑进行管理员级别的操作。为什么?当共享方式为仅来宾方式时。任何连接的用户权限只能是guest级别的。guest能有多少权限?不信你

可以做一次实验。向一台启用了仅来宾且开放默认共享的主机用net use命令进行连接。例如:net use \ipIPC$ "password" /user:"administrator"我可以肯定的告诉你：无论你的password填的是什么。都会提醒你"命令成功完成"。你实际上得到了管理员权限吗?答案是否定的。你得到的只是guest权限。很庆幸的是，Windows XP安装后的默认共享方式就是"仅来宾"的方式。

答3:Windows 2000下IPC$共享是可以删除的，然而在XP下就不行了。网上产生这种说法无非是没有亲身体会直接把Windows 2000下的理论搬到了XP吧。让我们看看微软是怎么说的:&ldquo;服务器服务需要使用默认 IPC$ 系统管理共享。因此，您不可以删除此共享，我们建议您不要删除由 Windows 为根分区和卷创建的(如 C$)和为系统根文件夹创建的 (ADMIN$) 系统管理共享。删除这些文件夹可能会给依赖这些共享的管理员和程序或服务带来问题。&rdquo; 看到了吧，只要服务器服务"Server"正在运行当中，你就不可能删除IPC$。试图删除只会出现"拒绝访问"的错误提示。当你停止了Server服务后。IPC$会自动消失。

答4:创建脚本的确可以删除默认共享。但网上很多人都会提到通过组策略配置开机脚本。事实上。创建开机脚本并不能删除默认共享。如果不信大家可以去试一试。按网上的说法利用net share命令删除共享创建一个批处理脚本。然后加入到组策略当中&ldquo;计算机配置&rarr;Windows 设置&rarr;脚本(启动/关闭)&rdquo;去，重启后再用net share命令查看一下。你会发现：默认共享并没有被删除!这个脚本没有起作用。

**总结:**

默认共享并不是个漏洞。造成安全隐患的并不是默认共享本身。而是系统使用者本身。大家在看网上或书上的一些文章的时候。尽量经过自已亲自动手实践才能证明是否正确，有很多东西你传我我传你，传来传去就变了味。

**建议:**

1.Windows的漏洞是一个接着一个。除了及时的补丁。安装杀毒软件和防火墙外。我们自己能做的就是给自己的管理员账号设置一个强有力的密码!特别要注意的是administrator内置管理员账号。很多人的系统这个账号没有被禁用且密码为空。我们虽然并不必要符合Windows要求的密码复杂性。但最好采用一些人家并不了解而你自己熟悉的数字加字母的密码。

2.利用注册表关闭默认共享的方法:

打开注册表。在HKEY_LOCAL_MACHINE SYSTEM CurrentControlSet Services lanmanserver parameters下建立一个DWORD值，如果是工作站系统名为Autosharewks如果是SERVER的话改成Autoshareserver就OK啦!

3.杀毒软件和防火墙是必要的。奉劝那些自认为自己高手而拿机器在网上"裸奔"的人。常在河边走，怎能不湿鞋? 不要过分相信自己的能力!

